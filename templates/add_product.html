<!DOCTYPE html>
<html lang="en">
<link href="{{ url_for('static', filename='img/favicon.png') }}" rel="icon">
<head>
    <meta charset="UTF-8">
    <title>Add Product</title>
</head>

<body>
    <h1>Add a New Product</h1>

    <form action="{{ url_for('add_product') }}" method="POST" enctype="multipart/form-data">

        <label>Name:</label><br>
        <input type="text" name="name" required><br><br>

        <label>Category:</label><br>
        <input type="text" name="category" required><br><br>

        <label>Price:</label><br>
        <input type="number" step="0.01" name="price" required><br><br>

        <label>Rating (1-5):</label><br>
        <input type="number" step="0.1" min="1" max="5" name="rating" required><br><br>

        <label>Description:</label><br>
        <textarea name="description" required></textarea><br><br>

        <label>Main Images:</label><br>
        <input type="file" name="images" accept="image/*" multiple required><br><br>

        <hr>

        <h3>Sub Images + Descriptions</h3>

        <div id="subImagesContainer">
            <div class="sub-image-entry">
                <label>Sub Image:</label><br>
                <input type="file" name="sub_images[]" accept="image/*"><br><br>

                <label>Sub Image Description:</label><br>
                <input type="text" name="sub_descriptions[]" placeholder="Enter description"><br><br>

                <button type="button" class="remove-sub-image">Remove</button>
                <hr>
            </div>
        </div>

        <button type="button" id="addSubImageButton">+ Add Another Sub Image</button><br><br>

        <button type="submit">Add Product</button>
    </form>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const addSubImageButton = document.getElementById('addSubImageButton');
            const subImagesContainer = document.getElementById('subImagesContainer');

            addSubImageButton.addEventListener('click', function () {
                const newEntry = document.createElement('div');
                newEntry.classList.add('sub-image-entry');
                newEntry.innerHTML = `
                    <label>Sub Image:</label><br>
                    <input type="file" name="sub_images[]" accept="image/*"><br><br>

                    <label>Sub Image Description:</label><br>
                    <input type="text" name="sub_descriptions[]" placeholder="Enter description"><br><br>

                    <button type="button" class="remove-sub-image">Remove</button>
                    <hr>
                `;
                subImagesContainer.appendChild(newEntry);
            });

            subImagesContainer.addEventListener('click', function (e) {
                if (e.target.classList.contains('remove-sub-image')) {
                    e.target.closest('.sub-image-entry').remove();
                }
            });
        });
    </script>
</body>

</html>
